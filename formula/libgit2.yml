summary: C library of Git core methods that is re-entrant and linkable
web-url: https://libgit2.github.com
git-url: https://github.com/libgit2/libgit2.git
src-url: https://github.com/libgit2/libgit2/archive/v1.3.0.tar.gz
src-sha: 192eeff84596ff09efb6b01835a066f2df7cd7985e0991c79595688e6b36444e
license: GPL-2.0-only
dep-pkg: libssh2 pcre2
dep-upp: pkg-config
bsystem: cmake

install: |
    cmakew \
        -DBUILD_CLAR=OFF \
        -DBUILD_FUZZERS=OFF \
        -DBUILD_EXAMPLES=OFF \
        -DBUILD_SHARED_LIBS=ON \
        -DENABLE_WERROR=OFF \
        -DENABLE_TRACE=OFF \
        -DDEPRECATE_HARD=OFF \
        -DPROFILE=OFF \
        -DTHREADSAFE=ON \
        -DUSE_SSH=ON \
        -DUSE_HTTPS=OpenSSL \
        -DUSE_BUNDLED_ZLIB=OFF \
        -DREGEX_BACKEND=pcre2 \
        -DPCRE2_INCLUDE_DIR="$pcre2_INCLUDE_DIR" \
        -DPCRE2_LIBRARY="$pcre2_LIBRARY_DIR/libpcre2-8.a" \
        -DZLIB_INCLUDE_DIR="$zlib_INCLUDE_DIR" \
        -DZLIB_LIBRARY_RELEASE="$zlib_LIBRARY_DIR/libz.a"
